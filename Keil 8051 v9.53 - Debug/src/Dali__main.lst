C51 COMPILER V9.53.0.0   DALI__MAIN                                                        05/04/2016 15:19:09 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DALI__MAIN
OBJECT MODULE PLACED IN .\src\Dali__main.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v3_3\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\clfil
                    -ho\Dropbox (Silicon Labs)\Code_Workspace_Dali\Dali_\src\Dali__main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEV
                    -EL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:/SiliconLabs/SimplicityStudi
                    -o/v3_3/developer/sdks/si8051/v3//Device/shared/si8051Base;C:/SiliconLabs/SimplicityStudio/v3_3/developer/sdks/si8051/v3/
                    -/Device/EFM8UB1;C:/SiliconLabs/SimplicityStudio/v3_3/developer/sdks/si8051/v3//Device/EFM8UB1/inc;C:\SiliconLabs\Simplic
                    -ityStudio\v3_4a\developer\sdks\si8051\v3\Device\EFM8UB1\inc) PRINT(.\src\Dali__main.lst) COND PAGEWIDTH(120) PAGELENGTH(
                    -65) OBJECT(.\src\Dali__main.OBJ)

line level    source

   1          #include <SI_EFM8UB1_Register_Enums.h>
   2          #include "InitDevice.h"
   3          #include "Dali.h"
   4          
   5          
   6          //-----------------------------------------------------------------------------
   7          // Pin Definitions
   8          //-----------------------------------------------------------------------------
   9          
  10          #define DISP_BC_DRIVEN   0             // 0 = Board Controller drives display
  11          #define DISP_EFM8_DRIVEN 1             // 1 = EFM8 drives display
  12          
  13          //-----------------------------------------------------------------------------
  14          // Main Routine
  15          //-----------------------------------------------------------------------------
  16             xdata DALIRXREGISTERS DaliRead;
  17          void main (void)
  18          {
  19   1              uint8_t test=0;
  20   1      
  21   1              uint16_t fcounter;
  22   1         enter_DefaultMode_from_RESET();
  23   1      
  24   1         DisableDisplay();
  25   1        // DISP_EN = DISP_BC_DRIVEN;                          // EFM8 does not drive display
  26   1      
  27   1         TCON &= 0xF7; //Add this line
  28   1         IE_EA = 1; // Enable global interrupts
  29   1      
  30   1         IE_EA = 1;                                   // Enable global interrupts
  31   1         //PRTDRV |=0x1;                                                      //Enable high drive strength on P0
  32   1      
  33   1        // SetDaliInputPinPolarity(ACTIVE_LOW);
  34   1      
  35   1      
  36   1      
  37   1         ClearDaliFlags();
  38   1         ClearDaliRXData();
  39   1      
  40   1         while (1) {
  41   2      
  42   2      #ifdef DALIMASTERMODE
  43   2      
  44   2      
  45   2                 if (PB0_SW==0) {
  46   3      
  47   3                        DaliTXFrame(0xf0, 0x0f);
  48   3                         for(fcounter=0; fcounter<0xffff; fcounter++);
  49   3                 }
  50   2      
C51 COMPILER V9.53.0.0   DALI__MAIN                                                        05/04/2016 15:19:09 PAGE 2   

  51   2                 if (GetDaliDataReadyFlag()==1)
  52   2                 {
  53   3      
  54   3                         ClearDaliDataReadyFlag();
  55   3                         DaliRead=GetDaliRXData();
  56   3                         NOP();
  57   3      
  58   3                 }
  59   2      
  60   2      #else
              
              
                         if (GetDaliDataReadyFlag()==1)
                         {
                                 DaliRead=GetDaliRXData();
                                 ClearDaliDataReadyFlag();
                                 DaliAnswerFrame(0xff);
              
                         }
              
              #endif
  72   2         }
  73   1      
  74   1      
  75   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     72    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      2    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
