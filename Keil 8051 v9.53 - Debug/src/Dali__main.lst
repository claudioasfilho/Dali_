C51 COMPILER V9.53.0.0   DALI__MAIN                                                        05/03/2016 11:56:16 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DALI__MAIN
OBJECT MODULE PLACED IN .\src\Dali__main.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v3_3\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\clfil
                    -ho\Dropbox (Silicon Labs)\Code_Workspace_Dali\Dali_\src\Dali__main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEV
                    -EL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:/SiliconLabs/SimplicityStudi
                    -o/v3_3/developer/sdks/si8051/v3//Device/shared/si8051Base;C:/SiliconLabs/SimplicityStudio/v3_3/developer/sdks/si8051/v3/
                    -/Device/EFM8UB1;C:/SiliconLabs/SimplicityStudio/v3_3/developer/sdks/si8051/v3//Device/EFM8UB1/inc;C:\SiliconLabs\Simplic
                    -ityStudio\v3_4a\developer\sdks\si8051\v3\Device\EFM8UB1\inc) PRINT(.\src\Dali__main.lst) COND PAGEWIDTH(120) PAGELENGTH(
                    -65) OBJECT(.\src\Dali__main.OBJ)

line level    source

   1          #include <SI_EFM8UB1_Register_Enums.h>
   2          #include "InitDevice.h"
   3          #include "Dali.h"
   4          
   5          
   6          //-----------------------------------------------------------------------------
   7          // Pin Definitions
   8          //-----------------------------------------------------------------------------
   9          
  10          #define DISP_BC_DRIVEN   0             // 0 = Board Controller drives display
  11          #define DISP_EFM8_DRIVEN 1             // 1 = EFM8 drives display
  12          
  13          //-----------------------------------------------------------------------------
  14          // Main Routine
  15          //-----------------------------------------------------------------------------
  16          void main (void)
  17          {
  18   1              uint8_t test=0;
  19   1      
  20   1              uint16_t fcounter;
  21   1         enter_DefaultMode_from_RESET();
  22   1      
  23   1         DisableDisplay();
  24   1        // DISP_EN = DISP_BC_DRIVEN;                          // EFM8 does not drive display
  25   1      
  26   1         TCON &= 0xF7; //Add this line
  27   1         IE_EA = 1; // Enable global interrupts
  28   1      
  29   1         IE_EA = 1;                                   // Enable global interrupts
  30   1         //PRTDRV |=0x1;                                                      //Enable high drive strength on P0
  31   1      
  32   1      //   SetDaliInputPinPolarity(ACTIVE_LOW);
  33   1      
  34   1      
  35   1         while (1) {
  36   2      
  37   2                 if (PB0_SW==0) {
  38   3      
  39   3                        DaliTXFrame(0xf0, 0x0f);
  40   3                         for(fcounter=0; fcounter<0xffff; fcounter++);
  41   3                 }
  42   2      
  43   2                 if (GetBusyFlag()==1)
  44   2                 {
  45   3                         ClearBusyFlag();
  46   3                         DaliAnswerFrame(0xff);
  47   3      
  48   3                 }
  49   2      
  50   2         }
C51 COMPILER V9.53.0.0   DALI__MAIN                                                        05/03/2016 11:56:16 PAGE 2   

  51   1      
  52   1      
  53   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     54    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
